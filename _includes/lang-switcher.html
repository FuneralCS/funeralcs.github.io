<div class="lang-switcher" role="navigation" aria-label="Language switcher">
  {%- for lang in langs -%}
    {%- assign def_in_sub = site.polyglot.default_lang_in_subdir -%}
    {%- if def_in_sub == nil -%}
      {%- assign def_in_sub = true -%}
    {%- endif -%}

    {%- if lang == site.default_lang and def_in_sub == false -%}
      {%- assign lang_root = site.baseurl | append: '/' -%}
    {%- else -%}
      {%- assign lang_root = site.baseurl | append: '/' | append: lang | append: '/' -%}
    {%- endif -%}

    {%- if lang == site.active_lang -%}
      <span class="active" aria-current="page">{{ lang | upcase }}</span>
    {%- else -%}
      <a href="{{ lang_root | relative_url }}" title="Switch to {{ lang | upcase }}">{{ lang | upcase }}</a>
    {%- endif -%}
  {%- endfor -%}
</div>

<style>
.lang-switcher{display:flex;gap:.4rem;align-items:center;margin:.6rem 0}
.lang-switcher a,.lang-switcher span{
  padding:.28rem .6rem;border-radius:6px;
  font-weight:600;font-size:.88rem;text-decoration:none;
  color:inherit;border:1px solid rgba(0,0,0,.06)
}
.lang-switcher a:hover{background:rgba(0,0,0,.04)}
.lang-switcher .active{background:rgba(0,0,0,.12);
  box-shadow:inset 0 -2px rgba(0,0,0,.06)}
</style>
