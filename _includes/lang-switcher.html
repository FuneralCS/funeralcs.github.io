{%- assign active = site.active_lang | default: site.default_lang -%}
{%- assign def_in_sub = site.polyglot.default_lang_in_subdir | default: true -%}

<div class="lang-switcher" role="navigation" aria-label="Language switcher">
  {%- for lang in site.languages -%}
    {%- assign is_active = (lang == active) -%}

    {%- if is_active -%}
      <span class="pill active" aria-current="page">{{ lang | upcase }}</span>
    {%- else -%}
      {%- if lang == site.default_lang and def_in_sub == false -%}
        <a class="pill" href="/" title="Switch to {{ lang | upcase }}">{{ lang | upcase }}</a>
      {%- else -%}
        <a class="pill" href="/{{ lang }}/" title="Switch to {{ lang | upcase }}">{{ lang | upcase }}</a>
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}
</div>

<style>
.lang-switcher {
  display: flex;
  gap: .5rem;
  margin: .8rem 0;
}
.lang-switcher .pill {
  padding: .35rem .7rem;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.1);
  font-weight: 600;
  font-size: .9rem;
  text-decoration: none;
  color: inherit;
  transition: all .2s ease;
}
.lang-switcher .pill:hover {
  background: rgba(0,0,0,.05);
}
.lang-switcher .pill.active {
  background: rgba(0,0,0,.15);
  box-shadow: inset 0 -2px rgba(0,0,0,.08);
}
</style>
